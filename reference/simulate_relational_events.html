<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate relational event sequences — simulate_relational_events • amore</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate relational event sequences — simulate_relational_events"><meta name="description" content="Generate a simple relational event log for a sender set and receiver set
using a softmax allocation rule over dyadic intensities. The process follows
the Gillespie algorithm, where the time between events is drawn from an
exponential distribution with rate equal to the sum of all dyadic intensities."><meta property="og:description" content="Generate a simple relational event log for a sender set and receiver set
using a softmax allocation rule over dyadic intensities. The process follows
the Gillespie algorithm, where the time between events is drawn from an
exponential distribution with rate equal to the sum of all dyadic intensities."><meta property="og:image" content="https://franciscorichter.github.io/amore/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">amore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/franciscorichter/amore"><span class="fa fab fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate relational event sequences</h1>
      <small class="dont-index">Source: <a href="https://github.com/franciscorichter/amore/blob/main/R/simulate_events.R" class="external-link"><code>R/simulate_events.R</code></a></small>
      <div class="d-none name"><code>simulate_relational_events.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate a simple relational event log for a sender set and receiver set
using a softmax allocation rule over dyadic intensities. The process follows
the Gillespie algorithm, where the time between events is drawn from an
exponential distribution with rate equal to the sum of all dyadic intensities.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simulate_relational_events</span><span class="op">(</span></span>
<span>  <span class="va">n_events</span>,</span>
<span>  <span class="va">senders</span>,</span>
<span>  <span class="va">receivers</span>,</span>
<span>  baseline_rate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  start_time <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  horizon <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  baseline_logits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sender_covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sender_effects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  receiver_covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  receiver_effects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow_loops <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_controls <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n-events">n_events<a class="anchor" aria-label="anchor" href="#arg-n-events"></a></dt>
<dd><p>Number of events to generate.</p></dd>


<dt id="arg-senders">senders<a class="anchor" aria-label="anchor" href="#arg-senders"></a></dt>
<dd><p>Character vector listing the sender set \(\mathcal{S}\).</p></dd>


<dt id="arg-receivers">receivers<a class="anchor" aria-label="anchor" href="#arg-receivers"></a></dt>
<dd><p>Character vector listing the receiver set \(\mathcal{R}\).</p></dd>


<dt id="arg-baseline-rate">baseline_rate<a class="anchor" aria-label="anchor" href="#arg-baseline-rate"></a></dt>
<dd><p>Positive scalar. A constant baseline hazard multiplier
applied to all dyads. Defaults to 1.</p></dd>


<dt id="arg-start-time">start_time<a class="anchor" aria-label="anchor" href="#arg-start-time"></a></dt>
<dd><p>Initial time stamp.</p></dd>


<dt id="arg-horizon">horizon<a class="anchor" aria-label="anchor" href="#arg-horizon"></a></dt>
<dd><p>Optional maximum horizon; simulation stops once the cumulative
time would exceed this value.</p></dd>


<dt id="arg-baseline-logits">baseline_logits<a class="anchor" aria-label="anchor" href="#arg-baseline-logits"></a></dt>
<dd><p>Optional <code>length(senders) x length(receivers)</code>
matrix of baseline log-intensities. Defaults to zeros.</p></dd>


<dt id="arg-sender-covariates">sender_covariates<a class="anchor" aria-label="anchor" href="#arg-sender-covariates"></a></dt>
<dd><p>Optional numeric data.frame/matrix with one row per
sender.</p></dd>


<dt id="arg-sender-effects">sender_effects<a class="anchor" aria-label="anchor" href="#arg-sender-effects"></a></dt>
<dd><p>Optional numeric vector of coefficients for
<code>sender_covariates</code>. Required when sender covariates are supplied.</p></dd>


<dt id="arg-receiver-covariates">receiver_covariates<a class="anchor" aria-label="anchor" href="#arg-receiver-covariates"></a></dt>
<dd><p>Optional numeric data.frame/matrix with one row per
receiver.</p></dd>


<dt id="arg-receiver-effects">receiver_effects<a class="anchor" aria-label="anchor" href="#arg-receiver-effects"></a></dt>
<dd><p>Optional numeric vector of coefficients for
<code>receiver_covariates</code>. Required when receiver covariates are supplied.</p></dd>


<dt id="arg-allow-loops">allow_loops<a class="anchor" aria-label="anchor" href="#arg-allow-loops"></a></dt>
<dd><p>Logical; whether sender and receiver can coincide.</p></dd>


<dt id="arg-n-controls">n_controls<a class="anchor" aria-label="anchor" href="#arg-n-controls"></a></dt>
<dd><p>Integer; number of non-events (controls) to sample
uniformly at random for each realized event. If <code>n_controls &gt; 0</code>, the
function returns a case-control data frame suitable for conditional logistic
regression / GAM modeling. Defaults to 0.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>n_controls = 0</code>, a data.frame with columns <code>sender</code>,
<code>receiver</code> and <code>time</code>. If <code>n_controls &gt; 0</code>, it returns a
long-format data.frame with additional columns <code>stratum</code> (grouping an
event with its controls) and <code>event</code> (1 for the realized event,
0 for controls).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">senders</span> <span class="op">&lt;-</span> <span class="va">receivers</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">sender_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>activity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.2</span>, <span class="fl">1.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">receiver_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>popularity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="op">-</span><span class="fl">0.4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Standard event simulation</span></span></span>
<span class="r-in"><span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu">simulate_relational_events</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_events <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  senders <span class="op">=</span> <span class="va">senders</span>,</span></span>
<span class="r-in"><span>  receivers <span class="op">=</span> <span class="va">receivers</span>,</span></span>
<span class="r-in"><span>  sender_covariates <span class="op">=</span> <span class="va">sender_cov</span>,</span></span>
<span class="r-in"><span>  sender_effects <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  receiver_covariates <span class="op">=</span> <span class="va">receiver_cov</span>,</span></span>
<span class="r-in"><span>  receiver_effects <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">events</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sender receiver       time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      C        B 0.05297251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      B        A 0.06319316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      B        A 0.20346636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      C        B 0.23405456</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      C        B 0.37673663</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Case-control generation for partial likelihood inference</span></span></span>
<span class="r-in"><span><span class="va">cc_events</span> <span class="op">&lt;-</span> <span class="fu">simulate_relational_events</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_events <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  senders <span class="op">=</span> <span class="va">senders</span>,</span></span>
<span class="r-in"><span>  receivers <span class="op">=</span> <span class="va">receivers</span>,</span></span>
<span class="r-in"><span>  sender_covariates <span class="op">=</span> <span class="va">sender_cov</span>,</span></span>
<span class="r-in"><span>  sender_effects <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  n_controls <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cc_events</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   stratum event sender receiver       time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1     1      C        A 0.03418054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       1     0      B        C 0.03418054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       1     0      A        B 0.03418054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       2     1      B        C 0.07395278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       2     0      C        A 0.07395278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       2     0      A        B 0.07395278</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Francisco Richter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

